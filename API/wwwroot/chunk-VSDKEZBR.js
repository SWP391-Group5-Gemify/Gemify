import{Ac as Tn,Ba as Ue,Bc as yn,Ma as Me,Xa as En,a as fn,b as pn,g as l,ha as _n,k as it,la as In,oa as Le,r as mn,ra as vn,s as gn,ta as $,u as st,vb as te,w as ot,x as at}from"./chunk-5JFLDQZH.js";var bn=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zr=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],c=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},An={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,c=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,d=s>>2,h=(s&3)<<4|c>>4,f=(c&15)<<2|u>>6,g=u&63;a||(g=64,o||(f=64)),r.push(n[d],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bn(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zr(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||u==null||h==null)throw new ut;let f=s<<2|c>>4;if(r.push(f),u!==64){let g=c<<4&240|u>>2;if(r.push(g),h!==64){let v=u<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ut=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},qr=function(t){let e=bn(t);return An.encodeByteArray(e,!0)},pe=function(t){return qr(t).replace(/\./g,"")},dt=function(t){try{return An.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Gr(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Kr=()=>Gr().__FIREBASE_DEFAULTS__,Jr=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Yr=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&dt(t[1]);return e&&JSON.parse(e)},ht=()=>{try{return Kr()||Jr()||Yr()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Rn=t=>{var e,n;return(n=(e=ht())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Sn=t=>{let e=Rn(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ft=()=>{var t;return(t=ht())===null||t===void 0?void 0:t.config},kn=t=>{var e;return(e=ht())===null||e===void 0?void 0:e[`_${t}`]};var xe=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Pn(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[pe(JSON.stringify(n)),pe(JSON.stringify(o)),""].join(".")}function D(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function On(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(D())}function Cn(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Nn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Dn(){try{return typeof indexedDB=="object"}catch{return!1}}function Ln(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var Xr="FirebaseError",O=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Xr,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,V.prototype.create)}},V=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Zr(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new O(i,c,r)}};function Zr(t,e){return t.replace(Qr,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Qr=/\{\$([^}]+)}/g;function me(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(wn(s)&&wn(o)){if(!me(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function wn(t){return t!==null&&typeof t=="object"}function pt(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Un(t,e){let n=new lt(t,e);return n.subscribe.bind(n)}var lt=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ei(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ct),i.error===void 0&&(i.error=ct),i.complete===void 0&&(i.complete=ct);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ei(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ct(){}var ac=4*60*60*1e3;function C(t){return t&&t._delegate?t._delegate:t}var N=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var K="[DEFAULT]";var mt=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new xe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ni(e))try{this.getOrInitializeService({instanceIdentifier:K})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=K){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return l(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=K){return this.instances.has(e)}getOptions(e=K){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ti(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=K){return this.component?this.component.multipleInstances?e:K:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ti(t){return t===K?void 0:t}function ni(t){return t.instantiationMode==="EAGER"}var Fe=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new mt(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var ri=[],m=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(m||{}),ii={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},si=m.INFO,oi={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},ai=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=oi[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ne=class{constructor(e){this.name=e,this._logLevel=si,this._logHandler=ai,this._userLogHandler=null,ri.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in m))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ii[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...e),this._logHandler(this,m.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...e),this._logHandler(this,m.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,m.INFO,...e),this._logHandler(this,m.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,m.WARN,...e),this._logHandler(this,m.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,m.ERROR,...e),this._logHandler(this,m.ERROR,...e)}};var ci=(t,e)=>e.some(n=>t instanceof n),Mn,xn;function ui(){return Mn||(Mn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function li(){return xn||(xn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Fn=new WeakMap,_t=new WeakMap,Vn=new WeakMap,gt=new WeakMap,vt=new WeakMap;function di(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(U(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Fn.set(n,t)}).catch(()=>{}),vt.set(e,t),e}function hi(t){if(_t.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});_t.set(t,e)}var It={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _t.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vn.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return U(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Bn(t){It=t(It)}function fi(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Ve(this),e,...n);return Vn.set(r,e.sort?e.sort():[e]),U(r)}:li().includes(t)?function(...e){return t.apply(Ve(this),e),U(Fn.get(this))}:function(...e){return U(t.apply(Ve(this),e))}}function pi(t){return typeof t=="function"?fi(t):(t instanceof IDBTransaction&&hi(t),ci(t,ui())?new Proxy(t,It):t)}function U(t){if(t instanceof IDBRequest)return di(t);if(gt.has(t))return gt.get(t);let e=pi(t);return e!==t&&(gt.set(t,e),vt.set(e,t)),e}var Ve=t=>vt.get(t);function Wn(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),c=U(o);return r&&o.addEventListener("upgradeneeded",a=>{r(U(o.result),a.oldVersion,a.newVersion,U(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),c.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var mi=["get","getKey","getAll","getAllKeys","count"],gi=["put","add","delete","clear"],Et=new Map;function $n(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Et.get(e))return Et.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=gi.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mi.includes(n)))return;let s=function(o,...c){return l(this,null,function*(){let a=this.transaction(o,i?"readwrite":"readonly"),u=a.store;return r&&(u=u.index(c.shift())),(yield Promise.all([u[n](...c),i&&a.done]))[0]})};return Et.set(e,s),s}Bn(t=>pn(fn({},t),{get:(e,n,r)=>$n(e,n)||t.get(e,n,r),has:(e,n)=>!!$n(e,n)||t.has(e,n)}));var yt=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_i(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function _i(t){let e=t.getComponent();return e?.type==="VERSION"}var wt="@firebase/app",Hn="0.10.5";var J=new ne("@firebase/app"),Ii="@firebase/app-compat",vi="@firebase/analytics-compat",Ei="@firebase/analytics",Ti="@firebase/app-check-compat",yi="@firebase/app-check",wi="@firebase/auth",bi="@firebase/auth-compat",Ai="@firebase/database",Ri="@firebase/database-compat",Si="@firebase/functions",ki="@firebase/functions-compat",Pi="@firebase/installations",Oi="@firebase/installations-compat",Ci="@firebase/messaging",Ni="@firebase/messaging-compat",Di="@firebase/performance",Li="@firebase/performance-compat",Ui="@firebase/remote-config",Mi="@firebase/remote-config-compat",xi="@firebase/storage",Fi="@firebase/storage-compat",Vi="@firebase/firestore",Bi="@firebase/vertexai-preview",$i="@firebase/firestore-compat",Wi="firebase",Hi="10.12.2";var bt="[DEFAULT]",ji={[wt]:"fire-core",[Ii]:"fire-core-compat",[Ei]:"fire-analytics",[vi]:"fire-analytics-compat",[yi]:"fire-app-check",[Ti]:"fire-app-check-compat",[wi]:"fire-auth",[bi]:"fire-auth-compat",[Ai]:"fire-rtdb",[Ri]:"fire-rtdb-compat",[Si]:"fire-fn",[ki]:"fire-fn-compat",[Pi]:"fire-iid",[Oi]:"fire-iid-compat",[Ci]:"fire-fcm",[Ni]:"fire-fcm-compat",[Di]:"fire-perf",[Li]:"fire-perf-compat",[Ui]:"fire-rc",[Mi]:"fire-rc-compat",[xi]:"fire-gcs",[Fi]:"fire-gcs-compat",[Vi]:"fire-fst",[$i]:"fire-fst-compat",[Bi]:"fire-vertex","fire-js":"fire-js",[Wi]:"fire-js-all"};var ge=new Map,zi=new Map,At=new Map;function jn(t,e){try{t.container.addComponent(e)}catch(n){J.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function H(t){let e=t.name;if(At.has(e))return J.debug(`There were multiple attempts to register component ${e}.`),!1;At.set(e,t);for(let n of ge.values())jn(n,t);for(let n of zi.values())jn(n,t);return!0}function Pt(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function re(t){return t.settings!==void 0}var qi={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},W=new V("app","Firebase",qi);var Rt=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new N("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw W.create("app-deleted",{appName:this._name})}};var ie=Hi;function Ot(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:bt,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw W.create("bad-app-name",{appName:String(i)});if(n||(n=ft()),!n)throw W.create("no-options");let s=ge.get(i);if(s){if(me(n,s.options)&&me(r,s.config))return s;throw W.create("duplicate-app",{appName:i})}let o=new Fe(i);for(let a of At.values())o.addComponent(a);let c=new Rt(n,r,o);return ge.set(i,c),c}function Ie(t=bt){let e=ge.get(t);if(!e&&t===bt&&ft())return Ot();if(!e)throw W.create("no-app",{appName:t});return e}function Be(){return Array.from(ge.values())}function w(t,e,n){var r;let i=(r=ji[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),J.warn(c.join(" "));return}H(new N(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Gi="firebase-heartbeat-database",Ki=1,_e="firebase-heartbeat-store",Tt=null;function Kn(){return Tt||(Tt=Wn(Gi,Ki,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_e)}catch(n){console.warn(n)}}}}).catch(t=>{throw W.create("idb-open",{originalErrorMessage:t.message})})),Tt}function Ji(t){return l(this,null,function*(){try{let n=(yield Kn()).transaction(_e),r=yield n.objectStore(_e).get(Jn(t));return yield n.done,r}catch(e){if(e instanceof O)J.warn(e.message);else{let n=W.create("idb-get",{originalErrorMessage:e?.message});J.warn(n.message)}}})}function zn(t,e){return l(this,null,function*(){try{let r=(yield Kn()).transaction(_e,"readwrite");yield r.objectStore(_e).put(e,Jn(t)),yield r.done}catch(n){if(n instanceof O)J.warn(n.message);else{let r=W.create("idb-set",{originalErrorMessage:n?.message});J.warn(r.message)}}})}function Jn(t){return`${t.name}!${t.options.appId}`}var Yi=1024,Xi=30*24*60*60*1e3,St=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new kt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return l(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qn();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=Xi}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return l(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=qn(),{heartbeatsToSend:r,unsentEntries:i}=Zi(this._heartbeatsCache.heartbeats),s=pe(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function qn(){return new Date().toISOString().substring(0,10)}function Zi(t,e=Yi){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Gn(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Gn(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var kt=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return l(this,null,function*(){return Dn()?Ln().then(()=>!0).catch(()=>!1):!1})}read(){return l(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Ji(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return l(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return zn(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return l(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return zn(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Gn(t){return pe(JSON.stringify({version:2,heartbeats:t})).length}function Qi(t){H(new N("platform-logger",e=>new yt(e),"PRIVATE")),H(new N("heartbeat",e=>new St(e),"PRIVATE")),w(wt,Hn,t),w(wt,Hn,"esm2017"),w("fire-js","")}Qi("");var es="firebase",ts="10.12.2";w(es,ts,"app");var oe=new Tn("ANGULARFIRE2_VERSION");function Nt(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ee=(t,e)=>{let n=e?[e]:Be(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ve=class{constructor(){return Ee(ns)}},ns="app-check";function se(){}var $e=class{zone;delegate;constructor(e,n=gn){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Ct=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",se,{},se,se)),n.pipe(_n({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Te=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new $e(Zone.current)),this.insideAngular=n.run(()=>new $e(Zone.current,mn)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(vn(te))};static \u0275prov=In({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function We(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function rs(t){return We().ngZone.runOutsideAngular(()=>t())}function Y(t){return We().ngZone.run(()=>t())}function is(t){return ss(We())(t)}function ss(t){return function(n){return n=n.lift(new Ct(t.ngZone)),n.pipe(at(t.outsideAngular),ot(t.insideAngular))}}var os=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Y(()=>t.apply(void 0,r))},ye=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Y(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",se,{},se,se))),r[s]=os(r[s],n));let i=rs(()=>t.apply(this,r));if(!e)if(i instanceof it){let s=We();return i.pipe(at(s.outsideAngular),ot(s.insideAngular))}else return Y(()=>i);return i instanceof it?i.pipe(is):i instanceof Promise?Y(()=>new Promise((s,o)=>i.then(c=>Y(()=>s(c)),c=>Y(()=>o(c))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Y(()=>i)};var X=class{constructor(e){return e}},we=class{constructor(){return Be()}};function as(t){return t&&t.length===1?t[0]:new X(Ie())}var Dt=new Le("angularfire2._apps"),cs={provide:X,useFactory:as,deps:[[new $,Dt]]},us={provide:we,deps:[[new $,Dt]]};function ls(t){return(e,n)=>{let r=n.get(En);w("angularfire",oe.full,"core"),w("angularfire",oe.full,"app"),w("angular",yn.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new X(i)}}function Gc(t,...e){return Ue([cs,us,{provide:Dt,useFactory:ls(t),multi:!0,deps:[te,Me,Te,...e]}])}var Kc=ye(Ot,!0);function rr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ir=rr,sr=new V("auth","Firebase",rr());var qe=new ne("@firebase/auth");function ds(t,...e){qe.logLevel<=m.WARN&&qe.warn(`Auth (${ie}): ${t}`,...e)}function je(t,...e){qe.logLevel<=m.ERROR&&qe.error(`Auth (${ie}): ${t}`,...e)}function Yn(t,...e){throw zt(t,...e)}function jt(t,...e){return zt(t,...e)}function or(t,e,n){let r=Object.assign(Object.assign({},ir()),{[e]:n});return new V("auth","Firebase",r).create(e,{appName:t.name})}function ze(t){return or(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zt(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sr.create(t,...e)}function p(t,e,...n){if(!t)throw zt(e,...n)}function be(t){let e="INTERNAL ASSERTION FAILED: "+t;throw je(e),new Error(e)}function Ge(t,e){t||be(e)}function hs(){return Xn()==="http:"||Xn()==="https:"}function Xn(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function fs(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hs()||Cn()||"connection"in navigator)?navigator.onLine:!0}function ps(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Q=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ge(n>e,"Short delay should be less than long delay!"),this.isMobile=On()||Nn()}get(){return fs()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ms(t,e){Ge(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ke=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;be("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;be("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;be("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var gs={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var _s=new Q(3e4,6e4);function ar(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ze(s,o,c,a){return l(this,arguments,function*(t,e,n,r,i={}){return cr(t,i,()=>l(this,null,function*(){let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});let h=pt(Object.assign({key:t.config.apiKey},d)).slice(1),f=yield t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),Ke.fetch()(ur(t,t.config.apiHost,n,h),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},u))}))})}function cr(t,e,n){return l(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},gs),e);try{let i=new Mt(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw He(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[a,u]=c.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw He(t,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw He(t,"email-already-in-use",o);if(a==="USER_DISABLED")throw He(t,"user-disabled",o);let d=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw or(t,d,u);Yn(t,d)}}catch(i){if(i instanceof O)throw i;Yn(t,"network-request-failed",{message:String(i)})}})}function ur(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?ms(t.config,i):`${t.config.apiScheme}://${i}`}var Mt=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jt(this.auth,"network-request-failed")),_s.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function He(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=jt(t,e,r);return i.customData._tokenResponse=n,i}function Is(t,e){return l(this,null,function*(){return Ze(t,"POST","/v1/accounts:delete",e)})}function lr(t,e){return l(this,null,function*(){return Ze(t,"POST","/v1/accounts:lookup",e)})}function Ae(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function qt(t,e=!1){return l(this,null,function*(){let n=C(t),r=yield n.getIdToken(e),i=dr(r);p(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ae(Lt(i.auth_time)),issuedAtTime:Ae(Lt(i.iat)),expirationTime:Ae(Lt(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Lt(t){return Number(t)*1e3}function dr(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return je("JWT malformed, contained fewer than 3 sections"),null;try{let i=dt(n);return i?JSON.parse(i):(je("Failed to decode base64 JWT payload"),null)}catch(i){return je("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Zn(t){let e=dr(t);return p(e,"internal-error"),p(typeof e.exp<"u","internal-error"),p(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function xt(t,e,n=!1){return l(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof O&&vs(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function vs({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Ft=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>l(this,null,function*(){yield this.iteration()}),n)}iteration(){return l(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Se=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ae(this.lastLoginAt),this.creationTime=Ae(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Je(t){return l(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield xt(t,lr(n,{idToken:r}));p(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?hr(s.providerUserInfo):[],c=Es(t.providerData,o),a=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!c?.length,d=a?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Se(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)})}function Gt(t){return l(this,null,function*(){let e=C(t);yield Je(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Es(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function hr(t){return t.map(e=>{var{providerId:n}=e,r=st(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Ts(t,e){return l(this,null,function*(){let n=yield cr(t,{},()=>l(this,null,function*(){let r=pt({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=ur(t,i,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ke.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function ys(t,e){return l(this,null,function*(){return Ze(t,"POST","/v2/accounts:revokeToken",ar(t,e))})}var Re=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){p(e.idToken,"internal-error"),p(typeof e.idToken<"u","internal-error"),p(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){p(e.length!==0,"internal-error");let n=Zn(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return l(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(p(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return l(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Ts(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(p(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(p(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(p(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return be("not implemented")}};function j(t,e){p(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ke=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=st(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ft(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Se(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return l(this,null,function*(){let n=yield xt(this,this.stsTokenManager.getToken(this.auth,e));return p(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return qt(this,e)}reload(){return Gt(this)}_assign(e){this!==e&&(p(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){p(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return l(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Je(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return l(this,null,function*(){if(re(this.auth.app))return Promise.reject(ze(this.auth));let e=yield this.getIdToken();return yield xt(this,Is(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,a,u,d;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(c=n.tenantId)!==null&&c!==void 0?c:void 0,_=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,k=(u=n.createdAt)!==null&&u!==void 0?u:void 0,P=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:y,isAnonymous:F,providerData:L,stsTokenManager:ee}=n;p(T&&ee,e,"internal-error");let q=Re.fromJSON(this.name,ee);p(typeof T=="string",e,"internal-error"),j(h,e.name),j(f,e.name),p(typeof y=="boolean",e,"internal-error"),p(typeof F=="boolean",e,"internal-error"),j(g,e.name),j(v,e.name),j(A,e.name),j(_,e.name),j(k,e.name),j(P,e.name);let G=new t({uid:T,auth:e,email:f,emailVerified:y,displayName:h,isAnonymous:F,photoURL:v,phoneNumber:g,tenantId:A,stsTokenManager:q,createdAt:k,lastLoginAt:P});return L&&Array.isArray(L)&&(G.providerData=L.map(jr=>Object.assign({},jr))),_&&(G._redirectEventId=_),G}static _fromIdTokenResponse(e,n,r=!1){return l(this,null,function*(){let i=new Re;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Je(s),s})}static _fromGetAccountInfoResponse(e,n,r){return l(this,null,function*(){let i=n.users[0];p(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?hr(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Re;c.updateFromIdToken(r);let a=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Se(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(a,u),a})}};var Qn=new Map;function Z(t){Ge(t instanceof Function,"Expected a class definition");let e=Qn.get(t);return e?(Ge(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qn.set(t,e),e)}var ws=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return l(this,null,function*(){return!0})}_set(n,r){return l(this,null,function*(){this.storage[n]=r})}_get(n){return l(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return l(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Vt=ws;function Ut(t,e,n){return`firebase:${t}:${e}:${n}`}var Ye=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ut(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ut("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return l(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ke._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return l(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return l(this,null,function*(){if(!n.length)return new t(Z(Vt),e,r);let i=(yield Promise.all(n.map(u=>l(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Z(Vt),o=Ut(r,e.config.apiKey,e.name),c=null;for(let u of n)try{let d=yield u._get(o);if(d){let h=ke._fromJSON(e,d);u!==s&&(c=h),s=u;break}}catch{}let a=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new t(s,e,r):(s=a[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(u=>l(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function er(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ss(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bs(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ps(e))return"Blackberry";if(Os(e))return"Webos";if(As(e))return"Safari";if((e.includes("chrome/")||Rs(e))&&!e.includes("edge/"))return"Chrome";if(ks(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function bs(t=D()){return/firefox\//i.test(t)}function As(t=D()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rs(t=D()){return/crios\//i.test(t)}function Ss(t=D()){return/iemobile/i.test(t)}function ks(t=D()){return/android/i.test(t)}function Ps(t=D()){return/blackberry/i.test(t)}function Os(t=D()){return/webos/i.test(t)}function fr(t,e=[]){let n;switch(t){case"Browser":n=er(D());break;case"Worker":n=`${er(D())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ie}/${r}`}var Bt=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,c)=>{try{let a=e(s);o(a)}catch(a){c(a)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return l(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Cs(n){return l(this,arguments,function*(t,e={}){return Ze(t,"GET","/v2/passwordPolicy",ar(t,e))})}var Ns=6,$t=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Ns,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;let a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(i=a.containsLowercaseLetter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(o=a.containsNumericCharacter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(c=a.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),a}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Wt=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xe(this),this.idTokenSubscription=new Xe(this),this.beforeStateQueue=new Bt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Z(n)),this._initializationPromise=this.queue(()=>l(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ye.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return l(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return l(this,null,function*(){try{let n=yield lr(this,{idToken:e}),r=yield ke._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return l(this,null,function*(){var n;if(re(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===c)&&a?.user&&(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return p(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return l(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return l(this,null,function*(){try{yield Je(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=ps()}_delete(){return l(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return l(this,null,function*(){if(re(this.app))return Promise.reject(ze(this));let n=e?C(e):null;return n&&p(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return l(this,null,function*(){if(!this._deleted)return e&&p(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>l(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return l(this,null,function*(){return re(this.app)?Promise.reject(ze(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return re(this.app)?Promise.reject(ze(this)):this.queue(()=>l(this,null,function*(){yield this.assertedPersistence.setPersistence(Z(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return l(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return l(this,null,function*(){let e=yield Cs(this),n=new $t(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new V("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return l(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield ys(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return l(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return l(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Z(e)||this._popupRedirectResolver;p(n,this,"argument-error"),this.redirectPersistenceManager=yield Ye.create(this,[Z(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return l(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>l(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return l(this,null,function*(){if(e===this.currentUser)return this.queue(()=>l(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(p(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let a=e.addObserver(n,r,i);return()=>{o=!0,a()}}else{let a=e.addObserver(n);return()=>{o=!0,a()}}}directlySetCurrentUser(e){return l(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return p(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return l(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return l(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&ds(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Ds(t){return C(t)}var Xe=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Un(n=>this.observer=n)}get next(){return p(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ls={loadJS(){return l(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Us(t){Ls=t}function Ms(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function xs(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Z);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var au=Ms("rcb"),cu=new Q(3e4,6e4);var uu=new Q(2e3,1e4);var lu=10*60*1e3;var du=new Q(3e4,6e4);var hu=new Q(5e3,15e3);var fu=encodeURIComponent("fac");var tr="@firebase/auth",nr="1.7.4";var Ht=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return l(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){p(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Fs(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Vs(t){H(new N("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;p(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let a={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fr(t)},u=new Wt(r,i,s,a);return xs(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),H(new N("auth-internal",e=>{let n=Ds(e.getProvider("auth").getImmediate());return(r=>new Ht(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),w(tr,nr,Fs(t)),w(tr,nr,"esm2017")}var Bs=5*60,pu=kn("authIdTokenMaxAge")||Bs;function $s(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Us({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=jt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",$s().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Vs("Browser");var $o="auth";var Qe=class{constructor(){return Ee($o)}};var yr="firebasestorage.googleapis.com",wr="storageBucket",Wo=2*60*1e3,Ho=10*60*1e3,jo=1e3;var E=class t extends O{constructor(e,n,r=0){super(Kt(e),`Firebase Storage: ${n} (${Kt(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kt(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},I=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(I||{});function Kt(t){return"storage/"+t}function sn(){let t="An unknown error occurred, please check the error payload for server response.";return new E(I.UNKNOWN,t)}function zo(t){return new E(I.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function qo(t){return new E(I.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Go(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new E(I.UNAUTHENTICATED,t)}function Ko(){return new E(I.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Jo(t){return new E(I.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function br(){return new E(I.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ar(){return new E(I.CANCELED,"User canceled the upload/download.")}function Yo(t){return new E(I.INVALID_URL,"Invalid URL '"+t+"'.")}function Xo(t){return new E(I.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Zo(){return new E(I.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wr+"' property when initializing the app?")}function Rr(){return new E(I.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Qo(){return new E(I.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function ea(){return new E(I.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ta(t){return new E(I.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Yt(t){return new E(I.INVALID_ARGUMENT,t)}function Sr(){return new E(I.APP_DELETED,"The Firebase app was deleted.")}function na(t){return new E(I.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Oe(t,e){return new E(I.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Pe(t){throw new E(I.INTERNAL_ERROR,"Internal error: "+t)}var S=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw Xo(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(y){y.path.charAt(y.path.length-1)==="/"&&(y.path_=y.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),a={bucket:1,path:3};function u(y){y.path_=decodeURIComponent(y.path)}let d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${i}/o${f}`,"i"),v={bucket:1,path:3},A=n===yr?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",k=new RegExp(`^https?://${A}/${i}/${_}`,"i"),T=[{regex:c,indices:a,postModify:s},{regex:g,indices:v,postModify:u},{regex:k,indices:{bucket:1,path:2},postModify:u}];for(let y=0;y<T.length;y++){let F=T[y],L=F.regex.exec(e);if(L){let ee=L[F.indices.bucket],q=L[F.indices.path];q||(q=""),r=new t(ee,q),F.postModify(r);break}}if(r==null)throw Yo(e);return r}},Xt=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function ra(t,e,n){let r=1,i=null,s=null,o=!1,c=0;function a(){return c===2}let u=!1;function d(..._){u||(u=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,t(g,a())},_)}function f(){s&&clearTimeout(s)}function g(_,...k){if(u){f();return}if(_){f(),d.call(null,_,...k);return}if(a()||o){f(),d.call(null,_,...k);return}r<64&&(r*=2);let T;c===1?(c=2,T=0):T=(r+Math.random())*1e3,h(T)}let v=!1;function A(_){v||(v=!0,f(),!u&&(i!==null?(_||(c=2),clearTimeout(i),h(0)):_||(c=1)))}return h(0),s=setTimeout(()=>{o=!0,A(!0)},n),A}function ia(t){t(!1)}function sa(t){return t!==void 0}function oa(t){return typeof t=="function"}function aa(t){return typeof t=="object"&&!Array.isArray(t)}function rt(t){return typeof t=="string"||t instanceof String}function pr(t){return on()&&t instanceof Blob}function on(){return typeof Blob<"u"}function Zt(t,e,n,r){if(r<e)throw Yt(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Yt(`Invalid value for '${t}'. Expected ${n} or less.`)}function he(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function kr(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ue=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(ue||{});function Pr(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var Qt=class{constructor(e,n,r,i,s,o,c,a,u,d,h,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=a,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new ce(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let a=c.loaded,u=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(a,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===ue.NO_ERROR,a=s.getStatus();if(!c||Pr(a,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===ue.ABORT;r(!1,new ce(!1,null,d));return}let u=this.successCodes_.indexOf(a)!==-1;r(!0,new ce(u,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{let a=this.callback_(c,c.getResponse());sa(a)?s(a):s()}catch(a){o(a)}else if(c!==null){let a=sn();a.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,a)):o(a)}else if(i.canceled){let a=this.appDelete_?Sr():Ar();o(a)}else{let a=br();o(a)}};this.canceled_?n(!1,new ce(!1,null,!0)):this.backoffId_=ra(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ia(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ce=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function ca(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ua(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function la(t,e){e&&(t["X-Firebase-GMPID"]=e)}function da(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ha(t,e,n,r,i,s,o=!0){let c=kr(t.urlParams),a=t.url+c,u=Object.assign({},t.headers);return la(u,e),ca(u,n),ua(u,s),da(u,r),new Qt(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function fa(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pa(...t){let e=fa();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(on())return new Blob(t);throw new E(I.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ma(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function ga(t){if(typeof atob>"u")throw ta("base-64");return atob(t)}var M={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ce=class{constructor(e,n){this.data=e,this.contentType=n||null}};function _a(t,e){switch(t){case M.RAW:return new Ce(Or(e));case M.BASE64:case M.BASE64URL:return new Ce(Cr(t,e));case M.DATA_URL:return new Ce(va(e),Ea(e))}throw sn()}function Or(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Ia(t){let e;try{e=decodeURIComponent(t)}catch{throw Oe(M.DATA_URL,"Malformed data URL.")}return Or(e)}function Cr(t,e){switch(t){case M.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Oe(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case M.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Oe(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ga(e)}catch(i){throw i.message.includes("polyfill")?i:Oe(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var tt=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw Oe(M.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=Ta(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function va(t){let e=new tt(t);return e.base64?Cr(M.BASE64,e.rest):Ia(e.rest)}function Ea(t){return new tt(t).contentType}function Ta(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var nt=class t{constructor(e,n){let r=0,i="";pr(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(pr(this.data_)){let r=this.data_,i=ma(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(on()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(pa.apply(null,n))}else{let n=e.map(o=>rt(o)?_a(M.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)i[s++]=o[c]}),new t(i,!0)}}uploadData(){return this.data_}};function an(t){let e;try{e=JSON.parse(t)}catch{return null}return aa(e)?e:null}function ya(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function wa(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Nr(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function ba(t,e){return e}var b=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||ba}},et=null;function Aa(t){return!rt(t)||t.length<2?t:Nr(t)}function cn(){if(et)return et;let t=[];t.push(new b("bucket")),t.push(new b("generation")),t.push(new b("metageneration")),t.push(new b("name","fullPath",!0));function e(s,o){return Aa(o)}let n=new b("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new b("size");return i.xform=r,t.push(i),t.push(new b("timeCreated")),t.push(new b("updated")),t.push(new b("md5Hash",null,!0)),t.push(new b("cacheControl",null,!0)),t.push(new b("contentDisposition",null,!0)),t.push(new b("contentEncoding",null,!0)),t.push(new b("contentLanguage",null,!0)),t.push(new b("contentType",null,!0)),t.push(new b("metadata","customMetadata",!0)),et=t,et}function Ra(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new S(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Sa(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return Ra(r,t),r}function Dr(t,e,n){let r=an(e);return r===null?null:Sa(t,r,n)}function ka(t,e,n,r){let i=an(e);if(i===null||!rt(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(u=>{let d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),g=he(f,n,r),v=kr({alt:"media",token:u});return g+v})[0]}function Lr(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var mr="prefixes",gr="items";function Pa(t,e,n){let r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[mr])for(let i of n[mr]){let s=i.replace(/\/$/,""),o=t._makeStorageReference(new S(e,s));r.prefixes.push(o)}if(n[gr])for(let i of n[gr]){let s=t._makeStorageReference(new S(e,i.name));r.items.push(s)}return r}function Oa(t,e,n){let r=an(n);return r===null?null:Pa(t,e,r)}var B=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function x(t){if(!t)throw sn()}function un(t,e){function n(r,i){let s=Dr(t,i,e);return x(s!==null),s}return n}function Ca(t,e){function n(r,i){let s=Oa(t,e,i);return x(s!==null),s}return n}function Na(t,e){function n(r,i){let s=Dr(t,i,e);return x(s!==null),ka(s,i,t.host,t._protocol)}return n}function fe(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Ko():i=Go():n.getStatus()===402?i=qo(t.bucket):n.getStatus()===403?i=Jo(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Ur(t){let e=fe(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=zo(t.path)),s.serverResponse=i.serverResponse,s}return n}function Mr(t,e,n){let r=e.fullServerUrl(),i=he(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new B(i,s,un(t,n),o);return c.errorHandler=Ur(e),c}function Da(t,e,n,r,i){let s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);let o=e.bucketOnlyServerUrl(),c=he(o,t.host,t._protocol),a="GET",u=t.maxOperationRetryTime,d=new B(c,a,Ca(t,e.bucket),u);return d.urlParams=s,d.errorHandler=fe(e),d}function La(t,e,n){let r=e.fullServerUrl(),i=he(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new B(i,s,Na(t,n),o);return c.errorHandler=Ur(e),c}function Ua(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function xr(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Ua(null,e)),r}function Ma(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let T="";for(let y=0;y<2;y++)T=T+Math.random().toString().slice(2);return T}let a=c();o["Content-Type"]="multipart/related; boundary="+a;let u=xr(e,r,i),d=Lr(u,n),h="--"+a+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+a+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+a+"--",g=nt.getBlob(h,r,f);if(g===null)throw Rr();let v={name:u.fullPath},A=he(s,t.host,t._protocol),_="POST",k=t.maxUploadRetryTime,P=new B(A,_,un(t,n),k);return P.urlParams=v,P.headers=o,P.body=g.uploadData(),P.errorHandler=fe(e),P}var le=class{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}};function ln(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{x(!1)}return x(!!n&&(e||["active"]).indexOf(n)!==-1),n}function xa(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o=xr(e,r,i),c={name:o.fullPath},a=he(s,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=Lr(o,n),f=t.maxUploadRetryTime;function g(A){ln(A);let _;try{_=A.getResponseHeader("X-Goog-Upload-URL")}catch{x(!1)}return x(rt(_)),_}let v=new B(a,u,g,f);return v.urlParams=c,v.headers=d,v.body=h,v.errorHandler=fe(e),v}function Fa(t,e,n,r){let i={"X-Goog-Upload-Command":"query"};function s(u){let d=ln(u,["active","final"]),h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{x(!1)}h||x(!1);let f=Number(h);return x(!isNaN(f)),new le(f,r.size(),d==="final")}let o="POST",c=t.maxUploadRetryTime,a=new B(n,o,s,c);return a.headers=i,a.errorHandler=fe(e),a}var _r=256*1024;function Va(t,e,n,r,i,s,o,c){let a=new le(0,0);if(o?(a.current=o.current,a.total=o.total):(a.current=0,a.total=r.size()),r.size()!==a.total)throw Qo();let u=a.total-a.current,d=u;i>0&&(d=Math.min(d,i));let h=a.current,f=h+d,g="";d===0?g="finalize":u===d?g="upload, finalize":g="upload";let v={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${a.current}`},A=r.slice(h,f);if(A===null)throw Rr();function _(y,F){let L=ln(y,["active","final"]),ee=a.current+d,q=r.size(),G;return L==="final"?G=un(e,s)(y,F):G=null,new le(ee,q,L==="final",G)}let k="POST",P=e.maxUploadRetryTime,T=new B(n,k,_,P);return T.headers=v,T.body=A.uploadData(),T.progressCallback=c||null,T.errorHandler=fe(t),T}var R={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Jt(t){switch(t){case"running":case"pausing":case"canceling":return R.RUNNING;case"paused":return R.PAUSED;case"success":return R.SUCCESS;case"canceled":return R.CANCELED;case"error":return R.ERROR;default:return R.ERROR}}var en=class{constructor(e,n,r){if(oa(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function ae(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var Ir=null,tn=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ue.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ue.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ue.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Pe("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Pe("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Pe("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Pe("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Pe("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},nn=class extends tn{initXhr(){this.xhr_.responseType="text"}};function z(){return Ir?Ir():new nn}var rn=class{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=cn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(I.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(Pr(i.status,[]))if(s)i=br();else{this.sleepTime=Math.max(this.sleepTime*2,jo),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(I.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let r=xa(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,z,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,r)=>{let i=Fa(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,z,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=_r*this._chunkMultiplier,n=new le(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=Va(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(a){this._error=a,this._transition("error");return}let c=this._ref.storage._makeRequest(o,z,i,s,!1);this._request=c,c.getPromise().then(a=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(a.current),a.finalized?(this._metadata=a.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){_r*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let r=Mr(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,z,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let r=Ma(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,z,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ar(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=Jt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){let s=new en(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Jt(this._state)){case R.SUCCESS:ae(this._resolve.bind(null,this.snapshot))();break;case R.CANCELED:case R.ERROR:let n=this._reject;ae(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Jt(this._state)){case R.RUNNING:case R.PAUSED:e.next&&ae(e.next.bind(e,this.snapshot))();break;case R.SUCCESS:e.complete&&ae(e.complete.bind(e))();break;case R.CANCELED:case R.ERROR:e.error&&ae(e.error.bind(e,this._error))();break;default:e.error&&ae(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var de=class t{constructor(e,n){this._service=e,n instanceof S?this._location=n:this._location=S.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new S(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Nr(this._location.path)}get storage(){return this._service}get parent(){let e=ya(this._location.path);if(e===null)return null;let n=new S(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw na(e)}};function Ba(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new rn(t,new nt(e),n)}function $a(t){let e={prefixes:[],items:[]};return Fr(t,e).then(()=>e)}function Fr(t,e,n){return l(this,null,function*(){let i=yield Wa(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield Fr(t,e,i.nextPageToken))})}function Wa(t,e){e!=null&&typeof e.maxResults=="number"&&Zt("options.maxResults",1,1e3,e.maxResults);let n=e||{},r=Da(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,z)}function Ha(t){t._throwIfRoot("getMetadata");let e=Mr(t.storage,t._location,cn());return t.storage.makeRequestWithTokens(e,z)}function ja(t){t._throwIfRoot("getDownloadURL");let e=La(t.storage,t._location,cn());return t.storage.makeRequestWithTokens(e,z).then(n=>{if(n===null)throw ea();return n})}function za(t,e){let n=wa(t._location.path,e),r=new S(t._location.bucket,n);return new de(t.storage,r)}function qa(t){return/^[A-Za-z]+:\/\//.test(t)}function Ga(t,e){return new de(t,e)}function Vr(t,e){if(t instanceof Ne){let n=t;if(n._bucket==null)throw Zo();let r=new de(n,n._bucket);return e!=null?Vr(r,e):r}else return e!==void 0?za(t,e):t}function Ka(t,e){if(e&&qa(e)){if(t instanceof Ne)return Ga(t,e);throw Yt("To use ref(service, url), the first argument must be a Storage instance.")}else return Vr(t,e)}function vr(t,e){let n=e?.[wr];return n==null?null:S.makeFromBucketSpec(n,t)}function Ja(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Pn(i,t.app.options.projectId))}var Ne=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=yr,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Wo,this._maxUploadRetryTime=Ho,this._requests=new Set,i!=null?this._bucket=S.makeFromBucketSpec(i,this._host):this._bucket=vr(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=S.makeFromBucketSpec(this._url,e):this._bucket=vr(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Zt("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Zt("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return l(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return l(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new de(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Xt(Sr());{let o=ha(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return l(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},Er="@firebase/storage",Tr="0.12.5";var Br="storage";function Ya(t,e,n){return t=C(t),Ba(t,e,n)}function Xa(t){return t=C(t),Ha(t)}function Za(t){return t=C(t),$a(t)}function Qa(t){return t=C(t),ja(t)}function ec(t,e){return t=C(t),Ka(t,e)}function $r(t=Ie(),e){t=C(t);let r=Pt(t,Br).getImmediate({identifier:e}),i=Sn("storage");return i&&Wr(r,...i),r}function Wr(t,e,n,r={}){Ja(t,e,n,r)}function tc(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ne(n,r,i,e,ie)}function nc(){H(new N(Br,tc,"PUBLIC").setMultipleInstances(!0)),w(Er,Tr,""),w(Er,Tr,"esm2017")}nc();var De=class{constructor(e){return e}},Hr="storage",dn=class{constructor(){return Ee(Hr)}};var hn=new Le("angularfire2.storage-instances");function rc(t,e){let n=Nt(Hr,t,e);return n&&new De(n)}function ic(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new De(r)}}var sc={provide:dn,deps:[[new $,hn]]},oc={provide:De,useFactory:rc,deps:[[new $,hn],X]};function Rl(t,...e){return w("angularfire",oe.full,"gcs"),Ue([oc,sc,{provide:hn,useFactory:ic(t),multi:!0,deps:[te,Me,Te,we,[new $,Qe],[new $,ve],...e]}])}var Sl=ye($r,!0);export{Ya as a,Xa as b,Za as c,Qa as d,ec as e,Gc as f,Kc as g,De as h,Rl as i,Sl as j};
