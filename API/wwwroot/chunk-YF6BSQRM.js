import{a as ie,b as oe}from"./chunk-I4Q263QN.js";import{a as te}from"./chunk-NBIFUMLF.js";import{b as K,c as Q}from"./chunk-VDIAIRGD.js";import{a as ee}from"./chunk-V5J7M4I7.js";import{c as X}from"./chunk-IMZNUD52.js";import{a as Y,b as Z}from"./chunk-5LB5J5WN.js";import{a as ne}from"./chunk-JWFBI43Q.js";import"./chunk-BRZQVLQ6.js";import{a as re,b}from"./chunk-R2WOP35W.js";import"./chunk-J3BG4ZKK.js";import{a as R,b as $,g as J,h as U}from"./chunk-FXF7DOH7.js";import"./chunk-JJPOC4CD.js";import"./chunk-F2JFFDTT.js";import{b as O,d as v,g as V,h as j,k as H,m as L,o as q,q as z,s as W}from"./chunk-IJCGWU3B.js";import"./chunk-RGNDWIHZ.js";import"./chunk-J7DIVVOQ.js";import{n as y}from"./chunk-Y2G3PEDF.js";import{Fb as u,Hb as p,J as S,Mb as P,Rb as n,Sb as o,Tb as g,_b as f,ac as _,ad as A,ed as N,fd as w,gd as T,jc as r,kc as s,lc as B,ma as M,mb as d,nb as E,sc as F,v as G,wc as h,xa as k,xc as I,ya as D,yc as x}from"./chunk-5JFLDQZH.js";function de(l,e){if(l&1&&(n(0,"div",15),r(1),h(2,"currency"),o()),l&2){let t=_();d(),B(" ",x(2,1,t.currentGoldPrice,"VND")," ")}}function ae(l,e){if(l&1&&(n(0,"mat-error"),r(1),o()),l&2){let t=_();d(),s(t.updateErrorMessage("bidPrice"))}}function ce(l,e){if(l&1&&(n(0,"mat-error"),r(1),o()),l&2){let t=_();d(),s(t.updateErrorMessage("askPrice"))}}function me(l,e){if(l&1&&(n(0,"div",16)(1,"div",17)(2,"strong"),r(3,"Lo\u1EA1i V\xE0ng"),o(),n(4,"strong"),r(5),o()(),n(6,"div",17)(7,"strong"),r(8,"H\xE0m L\u01B0\u1EE3ng"),o(),n(9,"strong"),r(10),h(11,"percent"),o()(),n(12,"div",17)(13,"strong"),r(14,"Gi\xE1 B\xE1n C\u1EEDa H\xE0ng Hi\u1EC7n T\u1EA1i (VND/Ch\u1EC9)"),o(),n(15,"strong"),r(16),h(17,"currency"),o()(),n(18,"div",17)(19,"strong"),r(20,"Gi\xE1 Mua C\u1EEDa H\xE0ng Hi\u1EC7n T\u1EA1i (VND/Ch\u1EC9)"),o(),n(21,"strong"),r(22),h(23,"currency"),o()()()),l&2){let t=_();d(5),s(t.selectedGold.name),d(5),s(I(11,4,t.selectedGold.content/100)),d(6),s(x(17,6,t.selectedGold.latestBidPrice,"VND")),d(6),s(x(23,9,t.selectedGold.latestAskPrice,"VND"))}}var m,C=(m=class{constructor(e,t,i){this.goldService=e,this.formBuilder=t,this.notificationService=i,this.goldTypes=[],this.pattern=/^\d+$/,this.goldPriceForm=this.formBuilder.group({bidPrice:["",[v.required,v.pattern(this.pattern)]],askPrice:["",[v.required,v.pattern(this.pattern)]]})}ngOnInit(){this.loadGoldsDropdown()}loadGoldsDropdown(){this.goldService.getAllGolds().pipe(b(this)).subscribe({next:e=>{this.goldTypes=e.data,this.goldsDropdown=e.data.map(t=>({value:t.id,name:t.name}))},error(e){console.error(e)}})}getWorldGoldPrice(){S([this.goldService.getWorldGoldPrice(),this.goldService.getCurrency()]).pipe(b(this)).subscribe({next:([e,t])=>{this.currentGoldPrice=Math.round(e.price*t.data.VND.value/8.29)},error:e=>console.log(e)})}onSelectionChangeGoldTypeFromParent(e){let t=this.goldTypes.find(i=>i.id==e.value);t&&(this.selectedGold=t)}onReset(){this.getWorldGoldPrice(),this.goldPriceForm.reset()}onSubmit(){if(this.goldPriceForm.valid&&this.selectedGold){let t=this.selectedGold.id;this.goldPrice={goldTypeId:t,bidPrice:Number(this.goldPriceForm.get("bidPrice").value),askPrice:Number(this.goldPriceForm.get("askPrice").value)},this.goldService.updateBidAskGoldPrice(t,this.goldPrice).pipe(b(this)).subscribe({next:i=>{this.notificationService.show(`C\u1EADp nh\u1EADt v\xE0ng ${this.selectedGold?.name} th\xE0nh c\xF4ng`)},error:i=>{console.error(i),this.notificationService.show("C\xF3 l\u1ED7i x\u1EA3y ra trong qu\xE1 tr\xECnh c\u1EADp nh\u1EADt","Th\u1EED l\u1EA1i",5e3)}});var e=this.goldTypes.find(i=>i.id==this.selectedGold?.id);e.latestAskPrice=Number(this.goldPriceForm.get("askPrice").value),e.latestBidPrice=Number(this.goldPriceForm.get("bidPrice").value),this.selectedGold=e}}updateErrorMessage(e){let t=this.goldPriceForm.get(e),i="";switch(!0){case t?.hasError("required"):i="B\u1EA1n ph\u1EA3i nh\u1EADp tr\u01B0\u1EDDng n\xE0y";break;case t?.hasError("pattern"):e==="bidPrice"?i="Gi\xE1 b\xE1n ph\u1EA3i l\xE0 s\u1ED1":e==="askPrice"&&(i="Gi\xE1 mua ph\u1EA3i l\xE0 s\u1ED1");break}return i}},m.\u0275fac=function(t){return new(t||m)(E(te),E(z),E(ee))},m.\u0275cmp=k({type:m,selectors:[["app-gold-bid-ask"]],standalone:!0,features:[F],decls:34,vars:7,consts:[[1,"gold-form",3,"formGroup"],[1,"gold-form__header"],[1,"gold-form__current","u-margin-top-small"],[1,"btn","btn--primary","btn--with-icon",3,"click"],["class","gold-form__current-price",4,"ngIf"],[1,"u-margin-top-small"],[1,"gold-form__options","u-margin-top-small"],["appearance","outline"],["matInput","","type","text","formControlName","bidPrice","name","bidPrice"],["matInput","","type","text","formControlName","askPrice","name","askPrice"],["label","Ch\u1ECDn Lo\u1EA1i V\xE0ng",1,"gold-form__dropdown",3,"onSelectionChange","options"],["class","gold-form__selected-gold",4,"ngIf"],[1,"gold-form__buttons"],[1,"btn","btn--grad","btn--with-icon","gold-form__buttons__reset",3,"click"],[1,"btn","btn--primary","btn--with-icon","gold-form__buttons__submit",3,"click","disabled"],[1,"gold-form__current-price"],[1,"gold-form__selected-gold"],[1,"gold-form__selected-gold__info"]],template:function(t,i){if(t&1&&(n(0,"section")(1,"form",0)(2,"div",1),r(3," C\u1EADp nh\u1EADt gi\xE1 v\xE0ng "),o(),n(4,"div",2)(5,"button",3),f("click",function(a){return i.getWorldGoldPrice(),a.preventDefault()}),n(6,"mat-icon"),r(7,"attach_money"),o(),r(8,"L\u1EA5y gi\xE1 v\xE0ng th\u1EBF gi\u1EDBi (VND/Chi) "),o(),u(9,de,3,4,"div",4),o(),g(10,"mat-divider",5),n(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),r(14,"Gi\xE1 B\xE1n"),o(),g(15,"input",8),u(16,ae,2,1,"mat-error"),o(),n(17,"mat-form-field",7)(18,"mat-label"),r(19,"Gi\xE1 Mua"),o(),g(20,"input",9),u(21,ce,2,1,"mat-error"),o(),n(22,"app-generic-dropdown",10),f("onSelectionChange",function(a){return i.onSelectionChangeGoldTypeFromParent(a)}),o()(),u(23,me,24,12,"div",11),g(24,"mat-divider"),n(25,"div",12)(26,"button",13),f("click",function(a){return i.onReset(),a.preventDefault()}),n(27,"mat-icon"),r(28,"restore"),o(),r(29,"H\u1EE7y Nh\u1EADp"),o(),n(30,"button",14),f("click",function(a){return i.onSubmit(),a.preventDefault()}),n(31,"mat-icon"),r(32,"update"),o(),r(33,"C\u1EADp Nh\u1EADt"),o()()()()),t&2){let c,a;d(),p("formGroup",i.goldPriceForm),d(8),p("ngIf",i.currentGoldPrice),d(7),P(16,(c=i.goldPriceForm.get("bidPrice"))!=null&&c.invalid?16:-1),d(5),P(21,(a=i.goldPriceForm.get("askPrice"))!=null&&a.invalid?21:-1),d(),p("options",i.goldsDropdown),d(),p("ngIf",i.selectedGold),d(7),p("disabled",!i.goldPriceForm.valid||i.selectedGold==null)}},dependencies:[T,A,N,w,U,J,R,$,X,Q,K,W,H,O,V,j,L,q,ne,Z,Y,oe,ie],styles:[".gold-form__header[_ngcontent-%COMP%]{text-align:center;background-color:#333;font-size:2.4rem;color:#fff;line-height:5.2rem;letter-spacing:1.6px;text-transform:uppercase;box-shadow:#32325d40 0 50px 100px -20px,#0000004d 0 30px 60px -30px}.gold-form__current[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.gold-form__current-price[_ngcontent-%COMP%]{font-size:x-large;font-weight:600;padding:10px;border-radius:20px}.gold-form__options[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.gold-form__selected-gold__info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;font-size:large}.gold-form__calculated[_ngcontent-%COMP%]{margin:20px 0}.gold-form__calculated__button[_ngcontent-%COMP%]{margin-bottom:10px}.gold-form__calculated__bidprice[_ngcontent-%COMP%], .gold-form__calculated__askprice[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;font-size:large}.gold-form__buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:30px}.gold-form__buttons__submit[_ngcontent-%COMP%]{margin-left:30px}"]}),m);C=G([re()],C);var se=[{path:"",component:C}],Ne=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=D({type:e}),e.\u0275inj=M({imports:[y.forChild(se),y]});let l=e;return l})();export{Ne as GoldBidAskRoutingModule};
