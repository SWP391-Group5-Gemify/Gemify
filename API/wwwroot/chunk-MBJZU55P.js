import{a as J}from"./chunk-UJULOHSB.js";import"./chunk-SJZSMRH2.js";import{b as U,c as z}from"./chunk-VDIAIRGD.js";import{a as H}from"./chunk-V5J7M4I7.js";import{c as L}from"./chunk-IMZNUD52.js";import{a as X,b as $}from"./chunk-5LB5J5WN.js";import{a as B,b as O,g as G,h as K}from"./chunk-FXF7DOH7.js";import"./chunk-JJPOC4CD.js";import"./chunk-F2JFFDTT.js";import{b as S,d as c,g as A,h as D,k as N,m as R,o as j,p as q,q as T,s as V}from"./chunk-IJCGWU3B.js";import"./chunk-RGNDWIHZ.js";import"./chunk-J7DIVVOQ.js";import{h as F,j as y,n as M}from"./chunk-Y2G3PEDF.js";import{Fb as w,Hb as u,Rb as n,Sb as s,Tb as g,_b as k,ac as v,ad as I,gd as b,jc as a,lc as E,ma as _,mb as m,nb as d,sc as C,xa as P,ya as x}from"./chunk-5JFLDQZH.js";var f=class{constructor(){this.email="",this.password="",this.confirmPassword="",this.token=""}};function Y(r,t){if(r&1&&(n(0,"mat-error"),a(1),s()),r&2){let h=v();m(),E(" ",h.updateErrorMessage("password")," ")}}function Z(r,t){if(r&1&&(n(0,"mat-error"),a(1),s()),r&2){let h=v();m(),E(" ",h.updateErrorMessage("confirmPassword")," ")}}var Q=(()=>{let t=class t{constructor(o,e,i,p,l){this.forgotPasswordService=o,this.notificationService=e,this.formBuilder=i,this.route=p,this.router=l,this.resetPassword=new f,this.passwordForm=this.formBuilder.group({password:["",[c.required,c.pattern(/^(?=.*\d).{8,15}$/)]],confirmPassword:["",[c.required,this.matchValidator()]]})}ngOnInit(){this.route.queryParamMap.subscribe(o=>{let e=o.get("email"),i=o.get("token");e&&i&&(this.resetPassword.email=decodeURIComponent(e),this.resetPassword.token=decodeURIComponent(i))})}updateErrorMessage(o){let e=this.passwordForm.get(o),i="";switch(!0){case e?.hasError("required"):i="Vui l\xF2ng nh\u1EADp m\u1EADt kh\u1EA9u m\u1EDBi";break;case e?.hasError("password"):i="M\u1EADt kh\u1EA9u ph\u1EA3i c\xF3 8-15 k\xED t\u1EF1 v\xE0 \xEDt nh\u1EA5t m\u1ED9t ch\u1EEF s\u1ED1";break;case e?.hasError("confirmPassword"):i="M\u1EADt kh\u1EA9u kh\xF4ng tr\xF9ng kh\u1EDBp";break}return i}matchValidator(){return o=>o.value&&o.value!==this.passwordForm.get("password")?.value?{passwordMismatch:!0}:null}onResetPassword(){this.resetPassword.password=this.passwordForm.get("password").value,this.resetPassword.confirmPassword=this.passwordForm.get("confirmPassword").value,this.forgotPasswordService.resetPassword(this.resetPassword).subscribe({next:o=>{this.notificationService.show("Thay \u0111\u1ED5i m\u1EADt kh\u1EA9u th\xE0nh c\xF4ng"),this.router.navigate(["/"])},error:o=>this.notificationService.show("Thay \u0111\u1ED5i m\u1EADt kh\u1EA9u th\u1EA5t b\u1EA1i")})}};t.\u0275fac=function(e){return new(e||t)(d(J),d(H),d(T),d(F),d(y))},t.\u0275cmp=P({type:t,selectors:[["app-reset-password"]],standalone:!0,features:[C],decls:18,vars:3,consts:[[1,"reset-password"],[1,"reset-password__title"],[1,"reset-password__form",3,"formGroup"],["appearance","outline"],["matInput","","type","password","formControlName","password","name","password","required",""],[4,"ngIf"],["matInput","","type","password","formControlName","confirmPassword","name","confirmPassword","required",""],[1,"btn","btn--primary-dark","btn--with-icon","reset-password__button",3,"click"]],template:function(e,i){if(e&1&&(n(0,"div",0)(1,"h2",1),a(2,"\u0110\u1ED5i M\u1EADt Kh\u1EA9u"),s(),n(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),a(6,"Nh\u1EADp m\u1EADt kh\u1EA9u m\u1EDBi"),s(),g(7,"input",4),w(8,Y,2,1,"mat-error",5),s(),n(9,"mat-form-field",3)(10,"mat-label"),a(11,"X\xE1c nh\u1EADn l\u1EA1i m\u1EADt kh\u1EA9u"),s(),g(12,"input",6),w(13,Z,2,1,"mat-error",5),s(),n(14,"button",7),k("click",function(){return i.onResetPassword()}),n(15,"mat-icon"),a(16,"key"),s(),a(17,"\u0110\u1ED5i M\u1EADt Kh\u1EA9u"),s()()()),e&2){let p,l;m(3),u("formGroup",i.passwordForm),m(5),u("ngIf",(p=i.passwordForm.get("password"))==null?null:p.invalid),m(5),u("ngIf",(l=i.passwordForm.get("confirmPassword"))==null?null:l.invalid)}},dependencies:[b,I,K,G,B,O,L,z,U,V,N,S,A,D,q,R,j,$,X],styles:[".reset-password[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem;border-radius:4px}.reset-password__title[_ngcontent-%COMP%]{margin-bottom:1.5rem;font-size:3rem;font-weight:700}.reset-password__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:300px}.reset-password__button[_ngcontent-%COMP%]{width:100%}"]});let r=t;return r})();var tt=[{path:"",component:Q}],Mt=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=x({type:t}),t.\u0275inj=_({imports:[M.forChild(tt),M]});let r=t;return r})();export{Mt as ResetPasswordRoutingModule};
